<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>Python Virtual Environments Masterclass | spurin.com</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="Tutorial,Python,Python 2,Python 3,Virtual Environments" />
    
    <meta name="description" content="TL;DRThis tutorial gives a rapid primer of Python Virtual Environments and how to use them in your effectively in your Python programming endeavours.   By the end you’ll know how to use Virtual Envir">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Virtual Environments Masterclass">
<meta property="og:url" content="http://spurin.com/2019/03/12/Python-Virtual-Environments/index.html">
<meta property="og:site_name" content="spurin.com">
<meta property="og:description" content="TL;DRThis tutorial gives a rapid primer of Python Virtual Environments and how to use them in your effectively in your Python programming endeavours.   By the end you’ll know how to use Virtual Envir">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://spurin.com/images/pasted-39.png">
<meta property="article:published_time" content="2019-03-12T19:00:00.000Z">
<meta property="article:modified_time" content="2019-03-12T19:13:30.000Z">
<meta property="article:author" content="James Spurin">
<meta property="article:tag" content="Tutorial">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="Python 2">
<meta property="article:tag" content="Python 3">
<meta property="article:tag" content="Virtual Environments">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://spurin.com/images/pasted-39.png">
    

    

    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/titillium-web/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/3.3.1/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    


<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">Personal site for James Spurin</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <br>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-Python-Virtual-Environments" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Python Virtual Environments Masterclass
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2019/03/12/Python-Virtual-Environments/" class="article-date">
            <time datetime="2019-03-12T19:00:00.000Z" itemprop="datePublished">2019-03-12</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Python/" rel="tag">Python</a>, <a class="tag-link" href="/tags/Python-2/" rel="tag">Python 2</a>, <a class="tag-link" href="/tags/Python-3/" rel="tag">Python 3</a>, <a class="tag-link" href="/tags/Tutorial/" rel="tag">Tutorial</a>, <a class="tag-link" href="/tags/Virtual-Environments/" rel="tag">Virtual Environments</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p><img src="/images/pasted-39.png" alt=""></p>
<h4 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a>TL;DR</h4><p>This tutorial gives a rapid primer of Python Virtual Environments and how to use them in your effectively in your Python programming endeavours.  </p>
<p>By the end you’ll know how to use Virtual Environments in Python 3 and 2, how to install modules, freezing and replaying environments, whether or not to activate an environment, how to package environments for reuse, how to create wheels of installed modules and how you can make use of the awesome pip-tools module for effective management.</p>
<p>Finally, I provide some context on other ways of managing virtual environments, outside of the python core pip package.</p>
<h4 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h4><p>When working on Python, or teaching Python to others, an area that I am an advocate for is the use of Virtual Environments for projects.  Whilst many online training resources skip or leave such context until later on, personally, I feel that it is an area that is best covered at the earliest opportunity.  From a simplistic viewpoint, it provides a convenient environment for individuals to experiment with the plethora of modules available in the python ecosystem, and, mitigates the need for root privileges when installing modules on Linux based systems.  There are also a variety of other benefits that this post will aim to cover.</p>
<h4 id="Creating-Virtual-Environments"><a href="#Creating-Virtual-Environments" class="headerlink" title="Creating Virtual Environments"></a>Creating Virtual Environments</h4><p>In Both Python 2 and Python 3, virtual environments are available, however the creation of which varies between the two major languages and in version 3, there is both a preferred and legacy method.  Given the future of Python 3 this post emphasises more on this version of Python, however, much of which in the post will apply to both versions.</p>
<h4 id="Creating-A-Virtual-Environment-in-Python-3-Preferred-Approach"><a href="#Creating-A-Virtual-Environment-in-Python-3-Preferred-Approach" class="headerlink" title="Creating A Virtual Environment in Python 3 (Preferred Approach)"></a>Creating A Virtual Environment in Python 3 (Preferred Approach)</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ python3 -mvenv python3venv</span><br></pre></td></tr></table></figure>

<p>Breaking this down, the -m option on the command line, tells the interpreter to run the venv module that is provided as part of the core Python3 distribution.  The second parameter of ‘python3venv’ is the name of the virtual environment.  The execution of this command should give you a virtual environment in the directory of python3venv.</p>
<p>If you’re inquisitive, you can understand more on what is happening behind the scenes by reviewing the actual venv module.  A convenient way of identifying the source location, is through the REPL shell -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ python3</span><br><span class="line">Python 3.6.4 (v3.6.4:d48ecebad5, Dec 18 2017, 21:07:28)</span><br><span class="line">[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import venv</span><br><span class="line">&gt;&gt;&gt; print(venv)</span><br><span class="line">&lt;module &#39;venv&#39; from &#39;&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.6&#x2F;lib&#x2F;python3.6&#x2F;venv&#x2F;__init__.py&#39;&gt;</span><br></pre></td></tr></table></figure>

<p>With the code here being at ‘/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/venv/_<em>init_</em>.py’</p>
<p>If you jump to the bottom of the code in question, it has an execution block at the footer of the file allowing it to be executed as a script -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    rc &#x3D; 1</span><br><span class="line">    try:</span><br><span class="line">        main()</span><br><span class="line">        rc &#x3D; 0</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(&#39;Error: %s&#39; % e, file&#x3D;sys.stderr)</span><br><span class="line">    sys.exit(rc)</span><br></pre></td></tr></table></figure>

<p>Thus, executing the code directly, executes the main function that provides a list of available arguments to the user -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ python3 -mvenv</span><br><span class="line">usage: venv [-h] [--system-site-packages] [--symlinks | --copies] [--clear]</span><br><span class="line">            [--upgrade] [--without-pip] [--prompt PROMPT]</span><br><span class="line">            ENV_DIR [ENV_DIR ...]</span><br><span class="line">venv: error: the following arguments are required: ENV_DIR</span><br></pre></td></tr></table></figure>

<h4 id="Creating-A-Virtual-Environment-in-Python-3-6-and-Below-Deprecated-Approach"><a href="#Creating-A-Virtual-Environment-in-Python-3-6-and-Below-Deprecated-Approach" class="headerlink" title="Creating A Virtual Environment in Python 3.6 and Below (Deprecated Approach)"></a>Creating A Virtual Environment in Python 3.6 and Below (Deprecated Approach)</h4><p>Python Version 3.6 and below, have an executable called pyvenv which is essentially a binary wrapper for the venv module.  If you execute the binary as it is, you can see similarities in the usage syntax, with, an added deprecation warning in certain versions -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pyvenv</span><br><span class="line">WARNING: the pyenv script is deprecated in favour of &#96;python3.6 -m venv&#96;</span><br><span class="line">usage: venv [-h] [--system-site-packages] [--symlinks | --copies] [--clear]</span><br><span class="line">            [--upgrade] [--without-pip] [--prompt PROMPT]</span><br><span class="line">            ENV_DIR [ENV_DIR ...]</span><br><span class="line">venv: error: the following arguments are required: ENV_DIR</span><br></pre></td></tr></table></figure>

<p>Running the executable through the strings command, shows a similar entry point with an implicit import of the venv module -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ strings &#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.6&#x2F;bin&#x2F;pyvenv</span><br><span class="line">#!&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.6&#x2F;bin&#x2F;python3.6</span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    import sys</span><br><span class="line">    import pathlib</span><br><span class="line">    executable &#x3D; pathlib.Path(sys.executable or &#39;python3&#39;).name</span><br><span class="line">    print(&#39;WARNING: the pyenv script is deprecated in favour of &#39;</span><br><span class="line">          f&#39;&#96;&#123;executable&#125; -m venv&#96;&#39;, file&#x3D;sys.stderr)</span><br><span class="line">    rc &#x3D; 1</span><br><span class="line">    try:</span><br><span class="line">        import venv</span><br><span class="line">        venv.main()</span><br><span class="line">        rc &#x3D; 0</span><br><span class="line">    except Exception as e:</span><br><span class="line">        print(&#39;Error: %s&#39; % e, file&#x3D;sys.stderr)</span><br><span class="line">    sys.exit(rc)</span><br></pre></td></tr></table></figure>

<p>Finally, executing the binary gives the same result as the preferred approach, with the added warning shown in the snippet -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pyvenv python3venv</span><br><span class="line">WARNING: the pyenv script is deprecated in favour of &#96;python3.6 -m venv&#96;</span><br></pre></td></tr></table></figure>

<h4 id="Creating-A-Virtual-Environment-in-Python-2-x"><a href="#Creating-A-Virtual-Environment-in-Python-2-x" class="headerlink" title="Creating A Virtual Environment in Python 2.x"></a>Creating A Virtual Environment in Python 2.x</h4><p>On Python 2.x, the virtualenv binary can be used to create the Virtual Environment, on my Mac, this is available as part of the Python 2.7 installation.  In other operating systems your milage may vary and subsequently, virtualenv may need to be installed if it’s not already available.</p>
<p>Check for a virtualenv binary -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ which virtualenv</span><br><span class="line">&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;2.7&#x2F;bin&#x2F;virtualenv</span><br></pre></td></tr></table></figure>

<p>Create a Python 2.x virtualenv.  The syntax is similar to Python 3 with the target virtualenv directory.  The Python 2 equivalent however gives a lot more in terms of output -</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ virtualenv python2venv</span><br><span class="line">New python executable <span class="keyword">in</span> /Users/james/python2venv/bin/python</span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br></pre></td></tr></table></figure>


<h4 id="Inspecting-the-Virtual-Environments"><a href="#Inspecting-the-Virtual-Environments" class="headerlink" title="Inspecting the Virtual Environments"></a>Inspecting the Virtual Environments</h4><p>In both cases, a similar structure is created -</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ls python3venv python2venv/</span><br><span class="line">python2venv/:</span><br><span class="line">bin	include	lib</span><br><span class="line"></span><br><span class="line">python3venv:</span><br><span class="line">bin		include		lib		pyvenv.cfg</span><br></pre></td></tr></table></figure>

<p>The main difference being the pyvenv.cfg file that is visible in the root of the directory.  If you’re interested in knowing more about this file <a href="https://www.python.org/dev/peps/pep-0405/" target="_blank" rel="noopener">PEP-0405</a> has a lot of context.</p>
<h4 id="Activating-the-Virtual-Environment"><a href="#Activating-the-Virtual-Environment" class="headerlink" title="Activating the Virtual Environment"></a>Activating the Virtual Environment</h4><p>A convenient way of using the virtual environment is through activation, however, it is not an implicit requirement (something we’ll look into further).  When you activate the virtual environment, the user’s shell prompt (PS1) is updated and subsequently, the command path gives higher priority to the virtual environment.  If we check the PATH before activation, it may look something like this -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ echo $PATH</span><br><span class="line">&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.6&#x2F;bin:&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;2.7&#x2F;bin:&#x2F;usr&#x2F;local&#x2F;bin:&#x2F;usr&#x2F;bin:&#x2F;bin:&#x2F;usr&#x2F;sbin:&#x2F;sbin</span><br></pre></td></tr></table></figure>

<p>Activate the Virtual Environment, n.b. the change to the prompt</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ source python3venv&#x2F;bin&#x2F;activate</span><br><span class="line">(python3venv) $</span><br></pre></td></tr></table></figure>

<p>And checking the PATH, my virtual environment now takes precedence with it being the first entry in the PATH -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ echo $PATH</span><br><span class="line">&#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;bin:&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.6&#x2F;bin:&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;2.7&#x2F;bin:&#x2F;usr&#x2F;local&#x2F;bin:&#x2F;usr&#x2F;bin:&#x2F;bin:&#x2F;usr&#x2F;sbin:&#x2F;sbin</span><br></pre></td></tr></table></figure>

<h4 id="Python-and-pip-usage-in-the-venv"><a href="#Python-and-pip-usage-in-the-venv" class="headerlink" title="Python and pip usage in the venv"></a>Python and pip usage in the venv</h4><p>If we now execute either python or pip, owing to the PATH precedence, the binary from the virtual environment take priority</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ which python</span><br><span class="line">&#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;bin&#x2F;python</span><br><span class="line">(python3venv) $ which pip</span><br><span class="line">&#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;bin&#x2F;pip</span><br></pre></td></tr></table></figure>

<p>The Python environment, is automatically configured to search the environments paths for module initialisation, we can verify this with the REPL environment, note the addition of /Users/james/python3venv/lib/python3.6/site-packages to the sys.path list -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ python</span><br><span class="line">Python 3.6.4 (v3.6.4:d48ecebad5, Dec 18 2017, 21:07:28)</span><br><span class="line">[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import sys</span><br><span class="line">&gt;&gt;&gt; print(sys.path)</span><br><span class="line">[&#39;&#39;, &#39;&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.6&#x2F;lib&#x2F;python36.zip&#39;, &#39;&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.6&#x2F;lib&#x2F;python3.6&#39;, &#39;&#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.6&#x2F;lib&#x2F;python3.6&#x2F;lib-dynload&#39;, &#39;&#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#39;]</span><br></pre></td></tr></table></figure>


<h4 id="Installing-packages-through-pip"><a href="#Installing-packages-through-pip" class="headerlink" title="Installing packages through pip"></a>Installing packages through pip</h4><p>With the virtual environment activated, the use of pip will result in requested packages being installed direct to the virtual environment.  For example, if we install the awesome datetime module called arrow -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip install arrow</span><br><span class="line">Collecting arrow</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;f4&#x2F;7f&#x2F;0360628ba40bb93c10cd89cd289b6a8e9ea87b2db884b8edf32c80ee1c73&#x2F;arrow-0.13.1-py2.py3-none-any.whl</span><br><span class="line">Collecting python-dateutil (from arrow)</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;41&#x2F;17&#x2F;c62faccbfbd163c7f57f3844689e3a78bae1f403648a6afb1d0866d87fbb&#x2F;python_dateutil-2.8.0-py2.py3-none-any.whl (226kB)</span><br><span class="line">    100% |████████████████████████████████| 235kB 3.6MB&#x2F;s</span><br><span class="line">Collecting six&gt;&#x3D;1.5 (from python-dateutil-&gt;arrow)</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;73&#x2F;fb&#x2F;00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9&#x2F;six-1.12.0-py2.py3-none-any.whl</span><br><span class="line">Installing collected packages: six, python-dateutil, arrow</span><br><span class="line">Successfully installed arrow-0.13.1 python-dateutil-2.8.0 six-1.12.0</span><br><span class="line">You are using pip version 9.0.1, however version 19.0.3 is available.</span><br><span class="line">You should consider upgrading via the &#39;pip install --upgrade pip&#39; command.</span><br></pre></td></tr></table></figure>

<p>It has installed both arrow, and a dependent module of six and python-dateutil.  We can again confirm, that it is actually installed in the virtual environment, through the REPL interface -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ python</span><br><span class="line">Python 3.6.4 (v3.6.4:d48ecebad5, Dec 18 2017, 21:07:28)</span><br><span class="line">[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import arrow</span><br><span class="line">&gt;&gt;&gt; print(arrow)</span><br><span class="line">&lt;module &#39;arrow&#39; from &#39;&#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;arrow&#x2F;__init__.py&#39;&gt;</span><br><span class="line">&gt;&gt;&gt; ^D</span><br></pre></td></tr></table></figure>

<h4 id="Using-pip-to-upgrade-pip"><a href="#Using-pip-to-upgrade-pip" class="headerlink" title="Using pip to upgrade pip"></a>Using pip to upgrade pip</h4><p>The eagle eyed amongst you, may have noticed the warning that pip provided above, where a new version is available.  In the virtual environment, I typically recommend that people upgrade pip as a post action to creating the venv, prior to installing any modules but showed the approach above as an example of the warning that you may see.  We can upgrade the environment as follows -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip install --upgrade pip</span><br><span class="line">Cache entry deserialization failed, entry ignored</span><br><span class="line">Collecting pip</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;d8&#x2F;f3&#x2F;413bab4ff08e1fc4828dfc59996d721917df8e8583ea85385d51125dceff&#x2F;pip-19.0.3-py2.py3-none-any.whl</span><br><span class="line">Installing collected packages: pip</span><br><span class="line">  Found existing installation: pip 9.0.1</span><br><span class="line">    Uninstalling pip-9.0.1:</span><br><span class="line">      Successfully uninstalled pip-9.0.1</span><br><span class="line">Successfully installed pip-19.0.3</span><br><span class="line"></span><br><span class="line">(python3venv) $ pip --version</span><br><span class="line">pip 19.0.3 from &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;pip (python 3.6)</span><br></pre></td></tr></table></figure>

<h4 id="Freezing-Virtual-Environments"><a href="#Freezing-Virtual-Environments" class="headerlink" title="Freezing Virtual Environments"></a>Freezing Virtual Environments</h4><p>If we install additional modules to make this example more effective, i.e. flask</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip install flask</span><br><span class="line">Collecting flask</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;7f&#x2F;e7&#x2F;08578774ed4536d3242b14dacb4696386634607af824ea997202cd0edb4b&#x2F;Flask-1.0.2-py2.py3-none-any.whl (91kB)</span><br><span class="line">    100% |████████████████████████████████| 92kB 2.4MB&#x2F;s</span><br><span class="line">Collecting Jinja2&gt;&#x3D;2.10 (from flask)</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;7f&#x2F;ff&#x2F;ae64bacdfc95f27a016a7bed8e8686763ba4d277a78ca76f32659220a731&#x2F;Jinja2-2.10-py2.py3-none-any.whl (126kB)</span><br><span class="line">    100% |████████████████████████████████| 133kB 7.6MB&#x2F;s</span><br><span class="line">Collecting Werkzeug&gt;&#x3D;0.14 (from flask)</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;20&#x2F;c4&#x2F;12e3e56473e52375aa29c4764e70d1b8f3efa6682bef8d0aae04fe335243&#x2F;Werkzeug-0.14.1-py2.py3-none-any.whl (322kB)</span><br><span class="line">    100% |████████████████████████████████| 327kB 13.0MB&#x2F;s</span><br><span class="line">Collecting itsdangerous&gt;&#x3D;0.24 (from flask)</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;76&#x2F;ae&#x2F;44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e&#x2F;itsdangerous-1.1.0-py2.py3-none-any.whl</span><br><span class="line">Collecting click&gt;&#x3D;5.1 (from flask)</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;fa&#x2F;37&#x2F;45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec&#x2F;Click-7.0-py2.py3-none-any.whl (81kB)</span><br><span class="line">    100% |████████████████████████████████| 81kB 15.2MB&#x2F;s</span><br><span class="line">Collecting MarkupSafe&gt;&#x3D;0.23 (from Jinja2&gt;&#x3D;2.10-&gt;flask)</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;f0&#x2F;00&#x2F;a6aea33f5598b080b86d6b6d1214b51afe3ffa6100b902d5aa465080083f&#x2F;MarkupSafe-1.1.1-cp36-cp36m-macosx_10_6_intel.whl</span><br><span class="line">Installing collected packages: MarkupSafe, Jinja2, Werkzeug, itsdangerous, click, flask</span><br><span class="line">Successfully installed Jinja2-2.10 MarkupSafe-1.1.1 Werkzeug-0.14.1 click-7.0 flask-1.0.2 itsdangerous-1.1.0</span><br></pre></td></tr></table></figure>

<p>We have a significant number of modules, post Flask/Arrow installation.  The convenient command of pip freeze, allows us to capture a snapshot of the virtual environment, in this example I’m using tee, to also send the output to a text file called requirements.txt</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip freeze | tee &#x2F;tmp&#x2F;requirements.txt</span><br><span class="line">arrow&#x3D;&#x3D;0.13.1</span><br><span class="line">Click&#x3D;&#x3D;7.0</span><br><span class="line">Flask&#x3D;&#x3D;1.0.2</span><br><span class="line">itsdangerous&#x3D;&#x3D;1.1.0</span><br><span class="line">Jinja2&#x3D;&#x3D;2.10</span><br><span class="line">MarkupSafe&#x3D;&#x3D;1.1.1</span><br><span class="line">python-dateutil&#x3D;&#x3D;2.8.0</span><br><span class="line">six&#x3D;&#x3D;1.12.0</span><br><span class="line">Werkzeug&#x3D;&#x3D;0.14.1</span><br></pre></td></tr></table></figure>

<h4 id="Replaying-a-Virtual-Environments-Requirements"><a href="#Replaying-a-Virtual-Environments-Requirements" class="headerlink" title="Replaying a Virtual Environments Requirements"></a>Replaying a Virtual Environments Requirements</h4><p>Earlier on, I created a Python 2 virtual environment, let’s use this, to replay the virtual environment configuration.  Firstly, we deactivate the existing venv</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ deactivate</span><br><span class="line">$</span><br></pre></td></tr></table></figure>

<p>Then we activate the Python 2 virtual environment -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ source python2venv&#x2F;bin&#x2F;activate</span><br><span class="line">(python2venv) $</span><br></pre></td></tr></table></figure>

<p>Upgrade pip, in most cases you <em>should</em> be able to use ‘pip install –upgrade pip’, however, I encountered an issue and had to perform the following workaround -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ (python2venv) curl https:&#x2F;&#x2F;bootstrap.pypa.io&#x2F;get-pip.py | python</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100 1659k  100 1659k    0     0  2375k      0 --:--:-- --:--:-- --:--:-- 2377k</span><br><span class="line">DEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won&#39;t be maintained after that date. A future version of pip will drop support for Python 2.7.</span><br><span class="line">Collecting pip</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;d8&#x2F;f3&#x2F;413bab4ff08e1fc4828dfc59996d721917df8e8583ea85385d51125dceff&#x2F;pip-19.0.3-py2.py3-none-any.whl</span><br><span class="line">Installing collected packages: pip</span><br><span class="line">  Found existing installation: pip 9.0.1</span><br><span class="line">    Uninstalling pip-9.0.1:</span><br><span class="line">      Successfully uninstalled pip-9.0.1</span><br><span class="line">Successfully installed pip-19.0.3</span><br></pre></td></tr></table></figure>

<p>We can now replay the environment in our Python 3 setup, in the Python 2 environment, using the requirements.txt captured using pip freeze -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ (python2venv) pip install -r &#x2F;tmp&#x2F;requirements.txt</span><br><span class="line">DEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won&#39;t be maintained after that date. A future version of pip will drop support for Python 2.7.</span><br><span class="line">Collecting arrow&#x3D;&#x3D;0.13.1 (from -r &#x2F;tmp&#x2F;requirements.txt (line 1))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;f4&#x2F;7f&#x2F;0360628ba40bb93c10cd89cd289b6a8e9ea87b2db884b8edf32c80ee1c73&#x2F;arrow-0.13.1-py2.py3-none-any.whl</span><br><span class="line">Collecting Click&#x3D;&#x3D;7.0 (from -r &#x2F;tmp&#x2F;requirements.txt (line 2))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;fa&#x2F;37&#x2F;45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec&#x2F;Click-7.0-py2.py3-none-any.whl</span><br><span class="line">Collecting Flask&#x3D;&#x3D;1.0.2 (from -r &#x2F;tmp&#x2F;requirements.txt (line 3))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;7f&#x2F;e7&#x2F;08578774ed4536d3242b14dacb4696386634607af824ea997202cd0edb4b&#x2F;Flask-1.0.2-py2.py3-none-any.whl</span><br><span class="line">Collecting itsdangerous&#x3D;&#x3D;1.1.0 (from -r &#x2F;tmp&#x2F;requirements.txt (line 4))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;76&#x2F;ae&#x2F;44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e&#x2F;itsdangerous-1.1.0-py2.py3-none-any.whl</span><br><span class="line">Collecting Jinja2&#x3D;&#x3D;2.10 (from -r &#x2F;tmp&#x2F;requirements.txt (line 5))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;7f&#x2F;ff&#x2F;ae64bacdfc95f27a016a7bed8e8686763ba4d277a78ca76f32659220a731&#x2F;Jinja2-2.10-py2.py3-none-any.whl</span><br><span class="line">Collecting MarkupSafe&#x3D;&#x3D;1.1.1 (from -r &#x2F;tmp&#x2F;requirements.txt (line 6))</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;6d&#x2F;d2&#x2F;0ccd2c0e2cd93b35e765d9b3205cd6602e6b202b522fc7997531353715b3&#x2F;MarkupSafe-1.1.1-cp27-cp27m-macosx_10_6_intel.whl</span><br><span class="line">Collecting python-dateutil&#x3D;&#x3D;2.8.0 (from -r &#x2F;tmp&#x2F;requirements.txt (line 7))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;41&#x2F;17&#x2F;c62faccbfbd163c7f57f3844689e3a78bae1f403648a6afb1d0866d87fbb&#x2F;python_dateutil-2.8.0-py2.py3-none-any.whl</span><br><span class="line">Collecting six&#x3D;&#x3D;1.12.0 (from -r &#x2F;tmp&#x2F;requirements.txt (line 8))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;73&#x2F;fb&#x2F;00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9&#x2F;six-1.12.0-py2.py3-none-any.whl</span><br><span class="line">Collecting Werkzeug&#x3D;&#x3D;0.14.1 (from -r &#x2F;tmp&#x2F;requirements.txt (line 9))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;20&#x2F;c4&#x2F;12e3e56473e52375aa29c4764e70d1b8f3efa6682bef8d0aae04fe335243&#x2F;Werkzeug-0.14.1-py2.py3-none-any.whl</span><br><span class="line">Collecting backports.functools-lru-cache&gt;&#x3D;1.2.1; python_version &#x3D;&#x3D; &quot;2.7&quot; (from arrow&#x3D;&#x3D;0.13.1-&gt;-r &#x2F;tmp&#x2F;requirements.txt (line 1))</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;03&#x2F;8e&#x2F;2424c0e65c4a066e28f539364deee49b6451f8fcd4f718fefa50cc3dcf48&#x2F;backports.functools_lru_cache-1.5-py2.py3-none-any.whl</span><br><span class="line">Installing collected packages: six, python-dateutil, backports.functools-lru-cache, arrow, Click, MarkupSafe, Jinja2, itsdangerous, Werkzeug, Flask</span><br><span class="line">Successfully installed Click-7.0 Flask-1.0.2 Jinja2-2.10 MarkupSafe-1.1.1 Werkzeug-0.14.1 arrow-0.13.1 backports.functools-lru-cache-1.5 itsdangerous-1.1.0 python-dateutil-2.8.0 six-1.12.0</span><br></pre></td></tr></table></figure>

<p>Pip freeze, will confirm that the Python 2 environment has the same versions installed as the Python 3 environment and is almost identical to what we saw previously.  The version 2 equivalent also required a dependency of ‘backports.functools-lru-cache==1.5’ hence an additional module -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python2venv) $ pip freeze</span><br><span class="line">DEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won&#39;t be maintained after that date. A future version of pip will drop support for Python 2.7.</span><br><span class="line">arrow&#x3D;&#x3D;0.13.1</span><br><span class="line">backports.functools-lru-cache&#x3D;&#x3D;1.5</span><br><span class="line">Click&#x3D;&#x3D;7.0</span><br><span class="line">Flask&#x3D;&#x3D;1.0.2</span><br><span class="line">itsdangerous&#x3D;&#x3D;1.1.0</span><br><span class="line">Jinja2&#x3D;&#x3D;2.10</span><br><span class="line">MarkupSafe&#x3D;&#x3D;1.1.1</span><br><span class="line">python-dateutil&#x3D;&#x3D;2.8.0</span><br><span class="line">six&#x3D;&#x3D;1.12.0</span><br><span class="line">Werkzeug&#x3D;&#x3D;0.14.1</span><br></pre></td></tr></table></figure>

<p>Whilst I don’t necessarily recommend switching virtual environments between Python versions, the example was chosen to show the versitiliy of the pip freeze command and the ability, to replay an environment, albeit into the same version of a virtual environment, or another version whether major, or minor.</p>
<h4 id="Using-a-Virtual-Environment-without-activation"><a href="#Using-a-Virtual-Environment-without-activation" class="headerlink" title="Using a Virtual Environment, without activation"></a>Using a Virtual Environment, without activation</h4><p>Earlier, I made reference that it’s convenient, to activate a virtual environment but, in some cases, it’s also convenient not to activate it.  For example, you may wish to call a script or application direct.</p>
<p>The python binary, in the virtual environment can be called directly and existing search paths are honoured.  For example, if we call the binary direct without any virtualenv, we can still import the modules we’ve installed without error -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python2venv) $ deactivate</span><br><span class="line">$ python3venv&#x2F;bin&#x2F;python</span><br><span class="line">Python 3.6.4 (v3.6.4:d48ecebad5, Dec 18 2017, 21:07:28)</span><br><span class="line">[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import arrow</span><br><span class="line">&gt;&gt;&gt; print(arrow)</span><br><span class="line">&lt;module &#39;arrow&#39; from &#39;&#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;arrow&#x2F;__init__.py&#39;&gt;</span><br><span class="line">&gt;&gt;&gt; ^D</span><br><span class="line"></span><br><span class="line">$ python2venv&#x2F;bin&#x2F;python</span><br><span class="line">Python 2.7.14 (v2.7.14:84471935ed, Sep 16 2017, 12:01:12)</span><br><span class="line">[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import arrow</span><br><span class="line">&gt;&gt;&gt; print(arrow)</span><br><span class="line">&lt;module &#39;arrow&#39; from &#39;&#x2F;Users&#x2F;james&#x2F;python2venv&#x2F;lib&#x2F;python2.7&#x2F;site-packages&#x2F;arrow&#x2F;__init__.pyc&#39;&gt;</span><br><span class="line">&gt;&gt;&gt; ^D</span><br></pre></td></tr></table></figure>

<p>Our scripts can also use the #! directive, making direct reference to the python binary, if we create a quick script -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cat &lt;&lt;EOF &gt; test.py</span><br><span class="line">&gt; #!&#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;bin&#x2F;python</span><br><span class="line">&gt;</span><br><span class="line">&gt; import arrow</span><br><span class="line">&gt; utc &#x3D; arrow.utcnow()</span><br><span class="line">&gt; print(utc)</span><br><span class="line">&gt; EOF</span><br></pre></td></tr></table></figure>

<p>Set executable, and execute, we can confirm that modules within the venv are honoured -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ chmod u+x test.py</span><br><span class="line">$ .&#x2F;test.py</span><br><span class="line">2019-03-03T21:17:22.632130+00:00</span><br></pre></td></tr></table></figure>

<p>Making it highly convenient for a script or application, to run with the specific requirements that are needed.</p>
<h4 id="Packaging-and-re-use"><a href="#Packaging-and-re-use" class="headerlink" title="Packaging and re-use"></a>Packaging and re-use</h4><p>With a virtual environment configured, it’s possible to package an entire virtual environment, and use it as an execution base <em>providing</em> that the target installation has the same version of Python that was used to create the virtual environment and that the virtual environment is <em>placed in the same location</em>.  This is very convenient, when working in environments that have standardised builds.  Essentially, the whole environment can be packaged and deployed to another system.</p>
<p>To quickly demonstrate, take a dump of the virtual env</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ tar cf python3venv.tar python3venv</span><br></pre></td></tr></table></figure>

<p>Destroy the venv -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ rm -rf python3venv</span><br></pre></td></tr></table></figure>

<p>Extract the dump -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ tar xf python3venv.tar</span><br></pre></td></tr></table></figure>

<p>Test a dependent script -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ .&#x2F;test.py</span><br><span class="line">2019-03-03T21:26:47.082092+00:00</span><br></pre></td></tr></table></figure>

<h4 id="Using-pip-tools-to-manage-Virtual-Environments"><a href="#Using-pip-tools-to-manage-Virtual-Environments" class="headerlink" title="Using pip-tools to manage Virtual Environments"></a>Using pip-tools to manage Virtual Environments</h4><p>Personally, I am a big fan of pip-tools, it provides a great way, of managing and maintaining virtual environments and their dependencies.  From the examples above, we saw that the installation of both arrow and flask, resulted in a number of dependent modules.  If for example we now remove both arrow and flask, the dependencies, remain in the virtual environment -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip uninstall arrow flask</span><br><span class="line">Uninstalling arrow-0.13.1:</span><br><span class="line">  Would remove:</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;arrow-0.13.1.dist-info&#x2F;*</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;arrow&#x2F;*</span><br><span class="line">Proceed (y&#x2F;n)? y</span><br><span class="line">  Successfully uninstalled arrow-0.13.1</span><br><span class="line">Uninstalling Flask-1.0.2:</span><br><span class="line">  Would remove:</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;bin&#x2F;flask</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;Flask-1.0.2.dist-info&#x2F;*</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;flask&#x2F;*</span><br><span class="line">Proceed (y&#x2F;n)? y</span><br><span class="line">  Successfully uninstalled Flask-1.0.2</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip freeze</span><br><span class="line">Click&#x3D;&#x3D;7.0</span><br><span class="line">itsdangerous&#x3D;&#x3D;1.1.0</span><br><span class="line">Jinja2&#x3D;&#x3D;2.10</span><br><span class="line">MarkupSafe&#x3D;&#x3D;1.1.1</span><br><span class="line">python-dateutil&#x3D;&#x3D;2.8.0</span><br><span class="line">six&#x3D;&#x3D;1.12.0</span><br><span class="line">Werkzeug&#x3D;&#x3D;0.14.1</span><br></pre></td></tr></table></figure>

<p>Through the use of pip-tools, there is a cleaner way.  If we start with a fresh virtual environment and install pip-tools -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ deactivate</span><br><span class="line">$ rm -rf python3venv</span><br><span class="line">$ python3 -mvenv python3venv</span><br><span class="line">$ source python3venv&#x2F;bin&#x2F;activate</span><br><span class="line">(python3venv) $ pip install --upgrade pip</span><br><span class="line">Cache entry deserialization failed, entry ignored</span><br><span class="line">Collecting pip</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;d8&#x2F;f3&#x2F;413bab4ff08e1fc4828dfc59996d721917df8e8583ea85385d51125dceff&#x2F;pip-19.0.3-py2.py3-none-any.whl</span><br><span class="line">Installing collected packages: pip</span><br><span class="line">  Found existing installation: pip 9.0.1</span><br><span class="line">    Uninstalling pip-9.0.1:</span><br><span class="line">      Successfully uninstalled pip-9.0.1</span><br><span class="line">Successfully installed pip-19.0.3</span><br><span class="line"></span><br><span class="line">(python3venv) $ pip install pip-tools</span><br><span class="line">Collecting pip-tools</span><br><span class="line">  Downloading https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;58&#x2F;7a&#x2F;f93b24807b7ac2d9d0bd6b8a886bcbe67eb39c1b1184b985dd5e0e2eca92&#x2F;pip_tools-3.4.0-py2.py3-none-any.whl (43kB)</span><br><span class="line">    100% |████████████████████████████████| 51kB 2.3MB&#x2F;s</span><br><span class="line">Collecting six (from pip-tools)</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;73&#x2F;fb&#x2F;00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9&#x2F;six-1.12.0-py2.py3-none-any.whl</span><br><span class="line">Collecting click&gt;&#x3D;6 (from pip-tools)</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;fa&#x2F;37&#x2F;45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec&#x2F;Click-7.0-py2.py3-none-any.whl</span><br><span class="line">Installing collected packages: six, click, pip-tools</span><br><span class="line">Successfully installed click-7.0 pip-tools-3.4.0 six-1.12.0</span><br></pre></td></tr></table></figure>

<p>We can now use an input file to track requirements.  In this case, I’m going to create a requirements.in file, and I will implicitly put the versions of arrow and flask that I am interested in</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ cat &lt;&lt;EOF &gt; requirements.in</span><br><span class="line">&gt; arrow&#x3D;&#x3D;0.13.1</span><br><span class="line">&gt; Flask&#x3D;&#x3D;1.0.2</span><br><span class="line">&gt; EOF</span><br></pre></td></tr></table></figure>

<p>Using pip-compile, part of the pip-tools suite, we can create our requirements.txt from the requirements.in</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip-compile --generate-hashes --output-file requirements.txt requirements.in</span><br><span class="line">#</span><br><span class="line"># This file is autogenerated by pip-compile</span><br><span class="line"># To update, run:</span><br><span class="line">#</span><br><span class="line">#    pip-compile --generate-hashes --output-file requirements.txt requirements.in</span><br><span class="line">#</span><br><span class="line">arrow&#x3D;&#x3D;0.13.1 \</span><br><span class="line">    --hash&#x3D;sha256:3397e5448952e18e1295bf047014659effa5ae8da6a5371d37ff0ddc46fa6872 \</span><br><span class="line">    --hash&#x3D;sha256:6f54d9f016c0b7811fac9fb8c2c7fa7421d80c54dbdd75ffb12913c55db60b8a</span><br><span class="line">click&#x3D;&#x3D;7.0 \</span><br><span class="line">    --hash&#x3D;sha256:2335065e6395b9e67ca716de5f7526736bfa6ceead690adf616d925bdc622b13 \</span><br><span class="line">    --hash&#x3D;sha256:5b94b49521f6456670fdb30cd82a4eca9412788a93fa6dd6df72c94d5a8ff2d7 \</span><br><span class="line">    # via flask</span><br><span class="line">flask&#x3D;&#x3D;1.0.2 \</span><br><span class="line">    --hash&#x3D;sha256:2271c0070dbcb5275fad4a82e29f23ab92682dc45f9dfbc22c02ba9b9322ce48 \</span><br><span class="line">    --hash&#x3D;sha256:a080b744b7e345ccfcbc77954861cb05b3c63786e93f2b3875e0913d44b43f05</span><br><span class="line">itsdangerous&#x3D;&#x3D;1.1.0 \</span><br><span class="line">    --hash&#x3D;sha256:321b033d07f2a4136d3ec762eac9f16a10ccd60f53c0c91af90217ace7ba1f19 \</span><br><span class="line">    --hash&#x3D;sha256:b12271b2047cb23eeb98c8b5622e2e5c5e9abd9784a153e9d8ef9cb4dd09d749 \</span><br><span class="line">    # via flask</span><br><span class="line">jinja2&#x3D;&#x3D;2.10 \</span><br><span class="line">    --hash&#x3D;sha256:74c935a1b8bb9a3947c50a54766a969d4846290e1e788ea44c1392163723c3bd \</span><br><span class="line">    --hash&#x3D;sha256:f84be1bb0040caca4cea721fcbbbbd61f9be9464ca236387158b0feea01914a4 \</span><br><span class="line">    # via flask</span><br><span class="line">markupsafe&#x3D;&#x3D;1.1.1 \</span><br><span class="line">    --hash&#x3D;sha256:00bc623926325b26bb9605ae9eae8a215691f33cae5df11ca5424f06f2d1f473 \</span><br><span class="line">    --hash&#x3D;sha256:09027a7803a62ca78792ad89403b1b7a73a01c8cb65909cd876f7fcebd79b161 \</span><br><span class="line">    --hash&#x3D;sha256:09c4b7f37d6c648cb13f9230d847adf22f8171b1ccc4d5682398e77f40309235 \</span><br><span class="line">    --hash&#x3D;sha256:1027c282dad077d0bae18be6794e6b6b8c91d58ed8a8d89a89d59693b9131db5 \</span><br><span class="line">    --hash&#x3D;sha256:24982cc2533820871eba85ba648cd53d8623687ff11cbb805be4ff7b4c971aff \</span><br><span class="line">    --hash&#x3D;sha256:29872e92839765e546828bb7754a68c418d927cd064fd4708fab9fe9c8bb116b \</span><br><span class="line">    --hash&#x3D;sha256:43a55c2930bbc139570ac2452adf3d70cdbb3cfe5912c71cdce1c2c6bbd9c5d1 \</span><br><span class="line">    --hash&#x3D;sha256:46c99d2de99945ec5cb54f23c8cd5689f6d7177305ebff350a58ce5f8de1669e \</span><br><span class="line">    --hash&#x3D;sha256:500d4957e52ddc3351cabf489e79c91c17f6e0899158447047588650b5e69183 \</span><br><span class="line">    --hash&#x3D;sha256:535f6fc4d397c1563d08b88e485c3496cf5784e927af890fb3c3aac7f933ec66 \</span><br><span class="line">    --hash&#x3D;sha256:62fe6c95e3ec8a7fad637b7f3d372c15ec1caa01ab47926cfdf7a75b40e0eac1 \</span><br><span class="line">    --hash&#x3D;sha256:6dd73240d2af64df90aa7c4e7481e23825ea70af4b4922f8ede5b9e35f78a3b1 \</span><br><span class="line">    --hash&#x3D;sha256:717ba8fe3ae9cc0006d7c451f0bb265ee07739daf76355d06366154ee68d221e \</span><br><span class="line">    --hash&#x3D;sha256:79855e1c5b8da654cf486b830bd42c06e8780cea587384cf6545b7d9ac013a0b \</span><br><span class="line">    --hash&#x3D;sha256:7c1699dfe0cf8ff607dbdcc1e9b9af1755371f92a68f706051cc8c37d447c905 \</span><br><span class="line">    --hash&#x3D;sha256:88e5fcfb52ee7b911e8bb6d6aa2fd21fbecc674eadd44118a9cc3863f938e735 \</span><br><span class="line">    --hash&#x3D;sha256:8defac2f2ccd6805ebf65f5eeb132adcf2ab57aa11fdf4c0dd5169a004710e7d \</span><br><span class="line">    --hash&#x3D;sha256:98c7086708b163d425c67c7a91bad6e466bb99d797aa64f965e9d25c12111a5e \</span><br><span class="line">    --hash&#x3D;sha256:9add70b36c5666a2ed02b43b335fe19002ee5235efd4b8a89bfcf9005bebac0d \</span><br><span class="line">    --hash&#x3D;sha256:9bf40443012702a1d2070043cb6291650a0841ece432556f784f004937f0f32c \</span><br><span class="line">    --hash&#x3D;sha256:ade5e387d2ad0d7ebf59146cc00c8044acbd863725f887353a10df825fc8ae21 \</span><br><span class="line">    --hash&#x3D;sha256:b00c1de48212e4cc9603895652c5c410df699856a2853135b3967591e4beebc2 \</span><br><span class="line">    --hash&#x3D;sha256:b1282f8c00509d99fef04d8ba936b156d419be841854fe901d8ae224c59f0be5 \</span><br><span class="line">    --hash&#x3D;sha256:b2051432115498d3562c084a49bba65d97cf251f5a331c64a12ee7e04dacc51b \</span><br><span class="line">    --hash&#x3D;sha256:ba59edeaa2fc6114428f1637ffff42da1e311e29382d81b339c1817d37ec93c6 \</span><br><span class="line">    --hash&#x3D;sha256:c8716a48d94b06bb3b2524c2b77e055fb313aeb4ea620c8dd03a105574ba704f \</span><br><span class="line">    --hash&#x3D;sha256:cd5df75523866410809ca100dc9681e301e3c27567cf498077e8551b6d20e42f \</span><br><span class="line">    --hash&#x3D;sha256:e249096428b3ae81b08327a63a485ad0878de3fb939049038579ac0ef61e17e7 \</span><br><span class="line">    # via jinja2</span><br><span class="line">python-dateutil&#x3D;&#x3D;2.8.0 \</span><br><span class="line">    --hash&#x3D;sha256:7e6584c74aeed623791615e26efd690f29817a27c73085b78e4bad02493df2fb \</span><br><span class="line">    --hash&#x3D;sha256:c89805f6f4d64db21ed966fda138f8a5ed7a4fdbc1a8ee329ce1b74e3c74da9e \</span><br><span class="line">    # via arrow</span><br><span class="line">six&#x3D;&#x3D;1.12.0 \</span><br><span class="line">    --hash&#x3D;sha256:3350809f0555b11f552448330d0b52d5f24c91a322ea4a15ef22629740f3761c \</span><br><span class="line">    --hash&#x3D;sha256:d16a0141ec1a18405cd4ce8b4613101da75da0e9a7aec5bdd4fa804d0e0eba73 \</span><br><span class="line">    # via python-dateutil</span><br><span class="line">werkzeug&#x3D;&#x3D;0.14.1 \</span><br><span class="line">    --hash&#x3D;sha256:c3fd7a7d41976d9f44db327260e263132466836cef6f91512889ed60ad26557c \</span><br><span class="line">    --hash&#x3D;sha256:d5da73735293558eb1651ee2fddc4d0dedcfa06538b8813a2e20011583c9e49b \</span><br><span class="line">    # via flask</span><br></pre></td></tr></table></figure>

<p>The clear benefit of this approach, is that the dependencies also have hashes to ensure consistency of the desired modules.</p>
<p>Running pip-sync, again, part of the pip-tools suite will synchronise our virtual environment with that of the requirements.txt file</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip-sync</span><br><span class="line">Collecting arrow&#x3D;&#x3D;0.13.1 (from -r &#x2F;var&#x2F;folders&#x2F;xk&#x2F;p46swdnn3b56rbd01qwdjhdh0000gn&#x2F;T&#x2F;tmpfwkk4j83 (line 1))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;f4&#x2F;7f&#x2F;0360628ba40bb93c10cd89cd289b6a8e9ea87b2db884b8edf32c80ee1c73&#x2F;arrow-0.13.1-py2.py3-none-any.whl</span><br><span class="line">Collecting flask&#x3D;&#x3D;1.0.2 (from -r &#x2F;var&#x2F;folders&#x2F;xk&#x2F;p46swdnn3b56rbd01qwdjhdh0000gn&#x2F;T&#x2F;tmpfwkk4j83 (line 4))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;7f&#x2F;e7&#x2F;08578774ed4536d3242b14dacb4696386634607af824ea997202cd0edb4b&#x2F;Flask-1.0.2-py2.py3-none-any.whl</span><br><span class="line">Collecting itsdangerous&#x3D;&#x3D;1.1.0 (from -r &#x2F;var&#x2F;folders&#x2F;xk&#x2F;p46swdnn3b56rbd01qwdjhdh0000gn&#x2F;T&#x2F;tmpfwkk4j83 (line 7))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;76&#x2F;ae&#x2F;44b03b253d6fade317f32c24d100b3b35c2239807046a4c953c7b89fa49e&#x2F;itsdangerous-1.1.0-py2.py3-none-any.whl</span><br><span class="line">Collecting jinja2&#x3D;&#x3D;2.10 (from -r &#x2F;var&#x2F;folders&#x2F;xk&#x2F;p46swdnn3b56rbd01qwdjhdh0000gn&#x2F;T&#x2F;tmpfwkk4j83 (line 10))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;7f&#x2F;ff&#x2F;ae64bacdfc95f27a016a7bed8e8686763ba4d277a78ca76f32659220a731&#x2F;Jinja2-2.10-py2.py3-none-any.whl</span><br><span class="line">Collecting markupsafe&#x3D;&#x3D;1.1.1 (from -r &#x2F;var&#x2F;folders&#x2F;xk&#x2F;p46swdnn3b56rbd01qwdjhdh0000gn&#x2F;T&#x2F;tmpfwkk4j83 (line 13))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;f0&#x2F;00&#x2F;a6aea33f5598b080b86d6b6d1214b51afe3ffa6100b902d5aa465080083f&#x2F;MarkupSafe-1.1.1-cp36-cp36m-macosx_10_6_intel.whl</span><br><span class="line">Collecting python-dateutil&#x3D;&#x3D;2.8.0 (from -r &#x2F;var&#x2F;folders&#x2F;xk&#x2F;p46swdnn3b56rbd01qwdjhdh0000gn&#x2F;T&#x2F;tmpfwkk4j83 (line 42))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;41&#x2F;17&#x2F;c62faccbfbd163c7f57f3844689e3a78bae1f403648a6afb1d0866d87fbb&#x2F;python_dateutil-2.8.0-py2.py3-none-any.whl</span><br><span class="line">Collecting werkzeug&#x3D;&#x3D;0.14.1 (from -r &#x2F;var&#x2F;folders&#x2F;xk&#x2F;p46swdnn3b56rbd01qwdjhdh0000gn&#x2F;T&#x2F;tmpfwkk4j83 (line 45))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;20&#x2F;c4&#x2F;12e3e56473e52375aa29c4764e70d1b8f3efa6682bef8d0aae04fe335243&#x2F;Werkzeug-0.14.1-py2.py3-none-any.whl</span><br><span class="line">Requirement already satisfied: click&gt;&#x3D;5.1 in .&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages (from flask&#x3D;&#x3D;1.0.2-&gt;-r &#x2F;var&#x2F;folders&#x2F;xk&#x2F;p46swdnn3b56rbd01qwdjhdh0000gn&#x2F;T&#x2F;tmpfwkk4j83 (line 4)) (7.0)</span><br><span class="line">Requirement already satisfied: six&gt;&#x3D;1.5 in .&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages (from python-dateutil&#x3D;&#x3D;2.8.0-&gt;-r &#x2F;var&#x2F;folders&#x2F;xk&#x2F;p46swdnn3b56rbd01qwdjhdh0000gn&#x2F;T&#x2F;tmpfwkk4j83 (line 42)) (1.12.0)</span><br><span class="line">Installing collected packages: python-dateutil, arrow, werkzeug, itsdangerous, markupsafe, jinja2, flask</span><br><span class="line">Successfully installed arrow-0.13.1 flask-1.0.2 itsdangerous-1.1.0 jinja2-2.10 markupsafe-1.1.1 python-dateutil-2.8.0 werkzeug-0.14.1</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip freeze</span><br><span class="line">arrow&#x3D;&#x3D;0.13.1</span><br><span class="line">Click&#x3D;&#x3D;7.0</span><br><span class="line">Flask&#x3D;&#x3D;1.0.2</span><br><span class="line">itsdangerous&#x3D;&#x3D;1.1.0</span><br><span class="line">Jinja2&#x3D;&#x3D;2.10</span><br><span class="line">MarkupSafe&#x3D;&#x3D;1.1.1</span><br><span class="line">pip-tools&#x3D;&#x3D;3.4.0</span><br><span class="line">python-dateutil&#x3D;&#x3D;2.8.0</span><br><span class="line">six&#x3D;&#x3D;1.12.0</span><br><span class="line">Werkzeug&#x3D;&#x3D;0.14.1</span><br></pre></td></tr></table></figure>

<p>Should however we wish to remove a component, for example Flask, we can update our requirements.in.  When we repeat the process with pip-sync, it will remove Flask as well as Flask’s dependencies -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ cat &lt;&lt;EOF &gt; requirements.in</span><br><span class="line">&gt; arrow&#x3D;&#x3D;0.13.1</span><br><span class="line">&gt; EOF</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip-compile --generate-hashes --output-file requirements.txt requirements.in</span><br><span class="line">#</span><br><span class="line"># This file is autogenerated by pip-compile</span><br><span class="line"># To update, run:</span><br><span class="line">#</span><br><span class="line">#    pip-compile --generate-hashes --output-file requirements.txt requirements.in</span><br><span class="line">#</span><br><span class="line">arrow&#x3D;&#x3D;0.13.1 \</span><br><span class="line">    --hash&#x3D;sha256:3397e5448952e18e1295bf047014659effa5ae8da6a5371d37ff0ddc46fa6872 \</span><br><span class="line">    --hash&#x3D;sha256:6f54d9f016c0b7811fac9fb8c2c7fa7421d80c54dbdd75ffb12913c55db60b8a</span><br><span class="line">python-dateutil&#x3D;&#x3D;2.8.0 \</span><br><span class="line">    --hash&#x3D;sha256:7e6584c74aeed623791615e26efd690f29817a27c73085b78e4bad02493df2fb \</span><br><span class="line">    --hash&#x3D;sha256:c89805f6f4d64db21ed966fda138f8a5ed7a4fdbc1a8ee329ce1b74e3c74da9e \</span><br><span class="line">    # via arrow</span><br><span class="line">six&#x3D;&#x3D;1.12.0 \</span><br><span class="line">    --hash&#x3D;sha256:3350809f0555b11f552448330d0b52d5f24c91a322ea4a15ef22629740f3761c \</span><br><span class="line">    --hash&#x3D;sha256:d16a0141ec1a18405cd4ce8b4613101da75da0e9a7aec5bdd4fa804d0e0eba73 \</span><br><span class="line">    # via python-dateutil</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip-sync</span><br><span class="line">Uninstalling Flask-1.0.2:</span><br><span class="line">  Successfully uninstalled Flask-1.0.2</span><br><span class="line">Uninstalling itsdangerous-1.1.0:</span><br><span class="line">  Successfully uninstalled itsdangerous-1.1.0</span><br><span class="line">Uninstalling Jinja2-2.10:</span><br><span class="line">  Successfully uninstalled Jinja2-2.10</span><br><span class="line">Uninstalling MarkupSafe-1.1.1:</span><br><span class="line">  Successfully uninstalled MarkupSafe-1.1.1</span><br><span class="line">Uninstalling Werkzeug-0.14.1:</span><br><span class="line">  Successfully uninstalled Werkzeug-0.14.1</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip freeze</span><br><span class="line">arrow&#x3D;&#x3D;0.13.1</span><br><span class="line">Click&#x3D;&#x3D;7.0</span><br><span class="line">pip-tools&#x3D;&#x3D;3.4.0</span><br><span class="line">python-dateutil&#x3D;&#x3D;2.8.0</span><br><span class="line">six&#x3D;&#x3D;1.12.0</span><br></pre></td></tr></table></figure>

<h4 id="Using-your-Virtual-Environment-with-a-Specific-PyPi-Repository"><a href="#Using-your-Virtual-Environment-with-a-Specific-PyPi-Repository" class="headerlink" title="Using your Virtual Environment with a Specific PyPi Repository"></a>Using your Virtual Environment with a Specific PyPi Repository</h4><p>In some circumstances, you may have a requirement to use a specific PyPi repository for installation.  Should this be the case, the creation of a file called pip.conf, in the root of the Virtual Environment is enough to satisfy this dependency.  An example pip.conf looks like the following, change hostname.spurin.com as required -</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[global]</span><br><span class="line">disable-pip-version-check &#x3D; True</span><br><span class="line">trusted-host &#x3D; hostname.spurin.com</span><br><span class="line">index &#x3D; https:&#x2F;&#x2F;hostname.spurin.com&#x2F;repository&#x2F;pypi-all&#x2F;pypi</span><br><span class="line">index-url &#x3D; https:&#x2F;&#x2F;hostname.spurin.com&#x2F;repository&#x2F;pypi-all&#x2F;simple</span><br></pre></td></tr></table></figure>

<h4 id="Isolating-Module-Versions"><a href="#Isolating-Module-Versions" class="headerlink" title="Isolating Module Versions"></a>Isolating Module Versions</h4><p>Virtual Environments are a great way of isolating, specific versions of modules.  Over time you may have a project, that has dependencies on a specific version whilst another, may benefit from newer functionality.</p>
<p>A particular module where this isolation is effective in Ansible and in the course that I created, <a href="https://www.udemy.com/mastering-ansible-x/" target="_blank" rel="noopener">Mastering Ansible</a>, my preferred approach for installing Ansible is via a Virtual Environment.  You can be specific with the version of Ansible that you install, can choose whether or not you leverage Python 2 or Python 3 (historically, Python 2 is a more reliable choice with Ansible) and you can have multiple versions of Ansible on the same system.  The following diagram from the course demonstrates the effectiveness, of Virtual Environments -</p>
<p><img src="/images/pasted-19.png" alt="Using Multiple Virtual Environments"></p>
<h4 id="Creating-Wheels-from-your-Virtual-Environment"><a href="#Creating-Wheels-from-your-Virtual-Environment" class="headerlink" title="Creating Wheels from your Virtual Environment"></a>Creating Wheels from your Virtual Environment</h4><p>Wheel can be used to capture Python modules into zip like files that can be conveniently used for installations.  They even handle complicated Python packages that require compilation (C extensions).  Using such an approach, allows you to facilitate installations from one machine that has a compiler to another that may not.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip wheel --wheel-dir&#x3D;&#x2F;tmp&#x2F;wheel-dir -r requirements.txt</span><br><span class="line">Collecting arrow&#x3D;&#x3D;0.13.1 (from -r requirements.txt (line 7))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;f4&#x2F;7f&#x2F;0360628ba40bb93c10cd89cd289b6a8e9ea87b2db884b8edf32c80ee1c73&#x2F;arrow-0.13.1-py2.py3-none-any.whl</span><br><span class="line">  Saved &#x2F;private&#x2F;tmp&#x2F;wheel-dir&#x2F;arrow-0.13.1-py2.py3-none-any.whl</span><br><span class="line">Collecting python-dateutil&#x3D;&#x3D;2.8.0 (from -r requirements.txt (line 10))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;41&#x2F;17&#x2F;c62faccbfbd163c7f57f3844689e3a78bae1f403648a6afb1d0866d87fbb&#x2F;python_dateutil-2.8.0-py2.py3-none-any.whl</span><br><span class="line">  Saved &#x2F;private&#x2F;tmp&#x2F;wheel-dir&#x2F;python_dateutil-2.8.0-py2.py3-none-any.whl</span><br><span class="line">Collecting six&#x3D;&#x3D;1.12.0 (from -r requirements.txt (line 14))</span><br><span class="line">  Using cached https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;73&#x2F;fb&#x2F;00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9&#x2F;six-1.12.0-py2.py3-none-any.whl</span><br><span class="line">  Saved &#x2F;private&#x2F;tmp&#x2F;wheel-dir&#x2F;six-1.12.0-py2.py3-none-any.whl</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ ls &#x2F;tmp&#x2F;wheel-dir</span><br><span class="line">arrow-0.13.1-py2.py3-none-any.whl		python_dateutil-2.8.0-py2.py3-none-any.whl	six-1.12.0-py2.py3-none-any.whl</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip uninstall arrow python_dateutil six</span><br><span class="line">Uninstalling arrow-0.13.1:</span><br><span class="line">  Would remove:</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;arrow-0.13.1.dist-info&#x2F;*</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;arrow&#x2F;*</span><br><span class="line">Proceed (y&#x2F;n)? y</span><br><span class="line">  Successfully uninstalled arrow-0.13.1</span><br><span class="line">Uninstalling python-dateutil-2.8.0:</span><br><span class="line">  Would remove:</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;dateutil&#x2F;*</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;python_dateutil-2.8.0.dist-info&#x2F;*</span><br><span class="line">Proceed (y&#x2F;n)? y</span><br><span class="line">  Successfully uninstalled python-dateutil-2.8.0</span><br><span class="line">Uninstalling six-1.12.0:</span><br><span class="line">  Would remove:</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;six-1.12.0.dist-info&#x2F;*</span><br><span class="line">    &#x2F;Users&#x2F;james&#x2F;python3venv&#x2F;lib&#x2F;python3.6&#x2F;site-packages&#x2F;six.py</span><br><span class="line">Proceed (y&#x2F;n)? y</span><br><span class="line">  Successfully uninstalled six-1.12.0</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(python3venv) $ pip install --find-links&#x3D;&#x2F;tmp&#x2F;wheel-dir -r requirements.txt</span><br><span class="line">Looking in links: &#x2F;tmp&#x2F;wheel-dir</span><br><span class="line">Collecting arrow&#x3D;&#x3D;0.13.1 (from -r requirements.txt (line 7))</span><br><span class="line">Collecting python-dateutil&#x3D;&#x3D;2.8.0 (from -r requirements.txt (line 10))</span><br><span class="line">Collecting six&#x3D;&#x3D;1.12.0 (from -r requirements.txt (line 14))</span><br><span class="line">Installing collected packages: six, python-dateutil, arrow</span><br><span class="line">Successfully installed arrow-0.13.1 python-dateutil-2.8.0 six-1.12.0</span><br></pre></td></tr></table></figure>


<h4 id="Closing-remarks"><a href="#Closing-remarks" class="headerlink" title="Closing remarks"></a>Closing remarks</h4><p>This post, covers a lot of the use cases for how I personally use virtual environment and the traditional approach for setup and use.  There are as to be expected with a topic such as this, a multitude of a ways of managing and maintaining your own virtual environments.</p>
<p>A popular module at the moment is Kenneth Reitz <a href="https://github.com/pypa/pipenv" target="_blank" rel="noopener">pipenv</a>.  It is an excellent module and as per his other endeavours, it has been met with significant praise.  There is however a flip side to it’s use and both the article by <a href="https://chriswarrick.com/blog/2018/07/17/pipenv-promises-a-lot-delivers-very-little/" target="_blank" rel="noopener">Chris Warrick</a> and the subsequent discussion in the <a href="https://news.ycombinator.com/item?id=18612590" target="_blank" rel="noopener">hacker news thread</a> provide another viewpoint.  I recommend both trying the module for yourself and reading the counter arguments.</p>
<p>Personally, I think of pipenv as a fantastic tool for personal development and if your development cycle is more aligned to that approach then take a look.  When working in a shared environment, having been a long time pip user prior to the release of pipenv, I’m personally happier with the approaches that I’ve outlined above.  YMMV :-)</p>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://spurin.com/2019/03/12/Python-Virtual-Environments/" data-id="ckbum3ry4000v0tno6dejdwa4" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "James Spurin"
        },
        "headline": "Python Virtual Environments Masterclass",
        "image": "http://spurin.com/images/pasted-39.png",
        "keywords": "Tutorial Python Python 2 Python 3 Virtual Environments",
        "genre": "",
        "datePublished": "2019-03-12",
        "dateCreated": "2019-03-12",
        "dateModified": "2019-03-12",
        "url": "http://spurin.com/2019/03/12/Python-Virtual-Environments/",
        "description": "
TL;DRThis tutorial gives a rapid primer of Python Virtual Environments and how to use them in your effectively in your Python programming endeavours.  
By the end you’ll know how to use Virtual Envir"
        "wordCount": 4681
    }
</script>

</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
    </div>


    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>Let's Connect:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="twitter" href="https://twitter.com/jamesspurin" target="_blank" rel="noopener">
                        <i class="icon fa fa-twitter"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="linkedin" href="https://uk.linkedin.com/in/jamesspurin" target="_blank" rel="noopener">
                        <i class="icon fa fa-linkedin"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/spurin" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="https://www.facebook.com/james.spurin" target="_blank" rel="noopener">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2019/03/16/Diagnosed-with-HSP-Hereditary-Spastic-Paraparesis-What-to-do-next/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            Diagnosed with HSP, Hereditary Spastic Paraparesis, What to do next
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2019/03/10/MasteringAnsible-com-Launched/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">MasteringAnsible.com Launched</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                <div class="widget-wrap">
<h3 class="widgettitle widget-title">Author</h3>
<p><span class="alignleft"><img class="avatar avatar-125 photo jetpack-lazy-image jetpack-lazy-image--handled" width="64" height="64" src="/images/James300.png" data-lazy-loaded="1" scale="0" style="border-radius: 50%; margin-right: 10px;margin-top: 10px; 
    float: left;"><noscript><img class="avatar avatar-125 photo" width="64" height="64" src="images/James300.png" style="border-radius: 50%;
    float: left;"></noscript></span>James Spurin is a Software Engineer, focusing on Infrastructure Automation, he is the Author of the best selling <a href="https://masteringansible.com/about/index.html" target="_blank" rel="noopener">Mastering Ansible</a> video course by Packt Publishing.  An advocate for open source software and developer of the Python library <a href="https://xmldataset.readthedocs.io/en/latest/" target="_blank" rel="noopener">xmldataset</a>, featured on the Awesome Python list.  Working within Cloud Engineering in Nomura on the development of a Private Cloud and maintainer of an API Development framework written in Python.<br><br>He has a gait affecting disability known as HSP.  Outside of technology, he spends his time supporting others with disabilities and is a promoter of a revolutionary treatment known as SDR (Selective Dorsal Rhizotomy).</p>
</div>

            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/06/25/Python-Inter-Process-Communication/" class="thumbnail">
    
    
        <span style="background-image:url(/images/pasted-79.png)" alt="Python IPC (Inter Process Communication)" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2020/06/25/Python-Inter-Process-Communication/" class="title">Python IPC (Inter Process Communication)</a></p>
                            <p class="item-date"><time datetime="2020-06-25T20:39:51.000Z" itemprop="datePublished">2020-06-25</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/06/22/CentOS-added-to-Lab-Web-Terminal-Images/" class="thumbnail">
    
    
        <span style="background-image:url(/images/pasted-75.png)" alt="CentOS added to Lab Docker Images with Web Terminal" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2020/06/22/CentOS-added-to-Lab-Web-Terminal-Images/" class="title">CentOS added to Lab Docker Images with Web Terminal</a></p>
                            <p class="item-date"><time datetime="2020-06-22T20:58:34.000Z" itemprop="datePublished">2020-06-22</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/06/21/Ubuntu-Lab-Docker-Images-with-Web-Terminal/" class="thumbnail">
    
    
        <span style="background-image:url(/images/pasted-74.png)" alt="Ubuntu Lab Docker Images with Web Terminal" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2020/06/21/Ubuntu-Lab-Docker-Images-with-Web-Terminal/" class="title">Ubuntu Lab Docker Images with Web Terminal</a></p>
                            <p class="item-date"><time datetime="2020-06-21T17:25:34.000Z" itemprop="datePublished">2020-06-21</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/06/17/Unexpected-Fans-with-OpenSource-Software/" class="thumbnail">
    
    
        <span style="background-image:url(/images/pasted-72.png)" alt="Unexpected Fans with OpenSource Software" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2020/06/17/Unexpected-Fans-with-OpenSource-Software/" class="title">Unexpected Fans with OpenSource Software</a></p>
                            <p class="item-date"><time datetime="2020-06-17T17:27:06.000Z" itemprop="datePublished">2020-06-17</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2020/06/16/Getting-started-with-Cassandra-Quickly/" class="thumbnail">
    
    
        <span style="background-image:url(/images/pasted-70.png)" alt="Getting started with Apache Cassandra, Quickly" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2020/06/16/Getting-started-with-Cassandra-Quickly/" class="title">Getting started with Apache Cassandra, Quickly</a></p>
                            <p class="item-date"><time datetime="2020-06-16T23:15:32.000Z" itemprop="datePublished">2020-06-16</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">5</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ansible/" rel="tag">Ansible</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/" rel="tag">Blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blogging/" rel="tag">Blogging</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Disability/" rel="tag">Disability</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/" rel="tag">Github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HSP/" rel="tag">HSP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTPS/" rel="tag">HTTPS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hosting/" rel="tag">Hosting</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python-2/" rel="tag">Python 2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python-3/" rel="tag">Python 3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SDR/" rel="tag">SDR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tutorial/" rel="tag">Tutorial</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Virtual-Environments/" rel="tag">Virtual Environments</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Website/" rel="tag">Website</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Ansible/" style="font-size: 10px;">Ansible</a> <a href="/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/tags/Blogging/" style="font-size: 10px;">Blogging</a> <a href="/tags/Disability/" style="font-size: 10px;">Disability</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Github/" style="font-size: 10px;">Github</a> <a href="/tags/HSP/" style="font-size: 10px;">HSP</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Hosting/" style="font-size: 10px;">Hosting</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Python-2/" style="font-size: 10px;">Python 2</a> <a href="/tags/Python-3/" style="font-size: 10px;">Python 3</a> <a href="/tags/SDR/" style="font-size: 10px;">SDR</a> <a href="/tags/Tutorial/" style="font-size: 10px;">Tutorial</a> <a href="/tags/Virtual-Environments/" style="font-size: 10px;">Virtual Environments</a> <a href="/tags/Website/" style="font-size: 10px;">Website</a>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2020 James Spurin</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'spurin';
    
    
    var disqus_url = 'http://spurin.com/2019/03/12/Python-Virtual-Environments/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>





    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


    </div>
</body>
</html>
